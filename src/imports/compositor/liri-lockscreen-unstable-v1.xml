<?xml version="1.0" encoding="UTF-8"?>
<protocol name="liri_lockscreen_unstable_v1">
  <copyright><![CDATA[
    SPDX-FileCopyrightText: 2021 Pier Luigi Fiorini <pierluigi.fiorini@gmail.com>

    SPDX-License-Identifier: MIT
  ]]></copyright>

  <interface name="zliri_lockscreen_v1" version="1">
    <description summary="lock and unlock">
      This interface provides notifications of lock and unlock events.
      Only one client at a time can bind to this interface.
      You may want to restrict this interface to whitelisted clients.
    </description>

    <enum name="error">
      <entry name="already_bound" value="0" summary="a client already bound this interface"/>
    </enum>

    <request name="destroy" type="destructor">
      <description summary="destroy the object">
        This request indicates that the client will not use the lock screen
        object any more. Objects that have been created through this instance
        are not affected.
      </description>
    </request>

    <request name="get_handle">
      <description summary="client become the screen locker">
        Request a new handle for the lock screen.
      </description>
      <arg name="id" type="new_id" interface="zliri_lockscreen_handle_v1"/>
    </request>
  </interface>

  <interface name="zliri_lockscreen_handle_v1" version="1">
    <event name="locked">
      <description summary="outputs are locked">
        This event is sent by the compositor when outputs needs to be locked.
        It is also sent when the client binds to the interface, if the outputs are
        already locked at that time.

        Surfaces on locked outputs might still be visible for a while even after
        this event is sent, due to an animation of the lock screen.
      </description>
    </event>

     <request name="unlock">
      <description summary="unlock outputs">
        Let the compositor know the user has successfully entered a password,
        PIN or any other supported authentication method.
      </description>
    </request>

    <request name="destroy" type="destructor">
      <description summary="destroy the handle">
        This request destroys the handle.

        Destroying an active handle without unlocking first will keep the
        output locked. The compositor might still hide all surfaces, but
        that really depends on the implementation.
      </description>
    </request>
  </interface>
</protocol>
